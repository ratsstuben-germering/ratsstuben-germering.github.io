# Nginx Caching Configuration for Ratsstuben Germering
# Place this in your Nginx server block or include it from nginx.conf

# Cache static assets for 1 year
location ~* \.(jpg|jpeg|png|gif|ico|svg|webp|woff|woff2|ttf|eot|otf)$ {
    expires 1y;
    add_header Cache-Control "public, immutable";
    access_log off;
}

# Cache CSS and JS files for 1 month
location ~* \.(css|js)$ {
    expires 1M;
    add_header Cache-Control "public, must-revalidate";
}

# Cache PDF files for 1 week
location ~* \.pdf$ {
    expires 1w;
    add_header Cache-Control "public";
}

# No caching for HTML and PHP files (they change frequently)
location ~* \.(html|php)$ {
    expires 1h;
    add_header Cache-Control "public, must-revalidate";
}

# Security headers for all locations
add_header X-Frame-Options "SAMEORIGIN" always;
add_header X-Content-Type-Options "nosniff" always;
add_header X-XSS-Protection "1; mode=block" always;
add_header Referrer-Policy "strict-origin-when-cross-origin" always;

# Enable gzip compression
gzip on;
gzip_vary on;
gzip_proxied any;
gzip_comp_level 6;
gzip_types text/plain text/css text/xml text/javascript application/json application/javascript application/xml+rss application/rss+xml font/truetype font/opentype application/vnd.ms-fontobject image/svg+xml;

# Brotli compression (if enabled)
# brotli on;
# brotli_comp_level 6;
# brotli_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript image/svg+xml;
